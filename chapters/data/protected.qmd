---
title: " "
format: html
toc: true
---

## Protected regions in the Gulf of California

Protected areas are a key component of the OHI assessment. They are a measure of the extent to which the Gulf of California is protected from human activities. The data used in this analysis is from the World Database on Protected Areas (WDPA) and includes all protected areas in the Gulf of California Ecoregion boundary. The WDPA is a comprehensive global database of protected areas that is updated on a regular basis. The data includes information on the name, location, and management of protected areas, as well as the level of protection provided to the area.

The protected areas in the Gulf of California include a variety of designations, including national parks, biosphere reserves, and marine protected areas. These areas are managed by a variety of organizations, including government agencies, non-governmental organizations, and local communities. The protected areas are an important tool for conserving the biodiversity of the Gulf of California and for promoting sustainable use of natural resources.

The International Union for Conservation of Nature (IUCN) has established a classification system for protected areas based on their management objectives. The IUCN categories range from strict nature reserves to areas with sustainable use of natural resources. The categories are used to assess the level of protection provided to an area and to guide the management of the area.

### IUCN Category Definitions

The IUCN category definitions range from most natural to least natural conditions is Ia = Ib > II = III > IV = VI > V ([Dudley, 2008](https://portals.iucn.org/library/sites/library/files/documents/pag-021.pdf)).

- **Category Ia:** Strict Nature Reserve - protected area managed mainly for science.
- **Category Ib:** Wilderness Area - protected area managed mainly for wilderness protection.
- **Category II:** National Park - protected area managed mainly for ecosystem protection and recreation.
- **Category III:** Natural Monument - protected area managed mainly for conservation of specific natural features.
- **Category IV:** Habitat/Species Management Area - protected area managed mainly for conservation through management intervention.
- **Category V:** Protected Landscape/Seascape - protected area managed mainly for landscape/seascape conservation and recreation.
- **Category VI:** Protected Area with Sustainable Use of Natural Resources - protected area managed mainly for sustainable use of natural resources.

### No Take Zones

Some protected areas in the Gulf of California have been designated as no-take zones, where all extractive activities are prohibited.


### Interactive Map 

The map below shows the designations of the protected areas in the Gulf of California. The searchable table provides additional information on the protected areas, including the name, designation, IUCN category, and status of the area. 

```{r setup, include=FALSE, warning=FALSE, message=FALSE}

# refer to ohi_goc_prep/LSP/v2025/lsp_wdpa_data_prep.qmd for full data prep

library(raster)
library(terra)
library(readr)
library(magrittr)
library(mapview)
library(sf)
library(tidyverse)
library(lwgeom)
library(here)
library(leaflet.extras2)
library(fasterize)
library(tictoc)
library(kableExtra)

# ---- sources! ----
# source(here("workflow", "R", "common.R")) # file creates objects to process data
## set the mazu and neptune data_edit share based on operating system
# dir_M             <- c('Windows' = '//mazu.nceas.ucsb.edu/ohi',
#                        'Darwin'  = '/Volumes/ohi',    ### connect (cmd-K) to smb://mazu/ohi
#                        'Linux'   = '/home/shares/ohi')[[ Sys.info()[['sysname']] ]]

# ---- set year and file path info ----
current_year <- 2025 # Update this in the future!!
version_year <- paste0("v",current_year)
data_dir_version_year <- paste0("d", current_year)

# ---- data directories ----

# WDPA clipped polygons in ohi_goc_prep/LSP/v2025/lsp_wdpa_data_prep.qmd
lsp_prep_dir <- "/Users/sophialec/Documents/OHI_GOC_projects/ohi_goc_prep/LSP/v2025/output"

# general ohi_goc_prep directory
ohi_goc_prep_dir <- "/Users/sophialec/Documents/OHI_GOC_projects/ohi_goc_prep"

# spatial data for GoC
goc_spatial <- here(ohi_goc_prep_dir, "spatial")

# set colors
# cols = rev(colorRampPalette(brewer.pal(9, 'Spectral'))(255)) # rainbow color scheme

# this CRS might be better for visualization, explore.
gulf_crs <- "+proj=aea +lat_1=23 +lat_2=30 +lat_0=25 +lon_0=-110 +datum=WGS84 +units=m +no_defs"

# other CRS options (but they are Mercator):
# UTM Zone 12N (Northern Gulf)
utm_12N <- "+proj=utm +zone=12 +datum=WGS84 +units=m +no_defs"

# UTM Zone 13N (Southern Gulf)
utm_13N <- "+proj=utm +zone=13 +datum=WGS84 +units=m +no_defs"
```

```{r wdpa_poly_all, echo=FALSE, warning=FALSE, message=FALSE}
# read in wdpa polygons in gulf_crs
wdpa_poly_all <- st_read(dsn = lsp_prep_dir, layer = "WDPA_Jan2025_shp_clipped_all", quiet = TRUE)

# read in GoC border
goc_border <- st_read(dsn = goc_spatial, layer = "GoC_polygon_ecoregion_eqarea", quiet = TRUE)
goc_border_albers <- st_transform(goc_border, st_crs(wdpa_poly_all)) 
goc_border_albers$border_name <- "Ecoregion Boundary"

# make mapview interactive map
library(leafpop)
goc_mapview_fancy <- mapview(wdpa_poly_all,
                             zcol = "desig_eng",  # color by IUCN category
                             layer.name = "Protected Areas",
                             map.types = c("OpenStreetMap", "Esri.WorldShadedRelief", "Esri.WorldImagery"),
                             alpha.regions = 0.8,
                             label = "name",
                             popup = popupTable(wdpa_poly_all, zcol = c("name", "desig_eng"))) +
  mapview(goc_border_albers, 
          fill = NA, 
          zcol = "border_name",
          col.regions = "black", 
          alpha.regions = 0.8,
          layer.name = "Gulf of California Ecoregion",
          homebutton = TRUE)
goc_mapview_fancy
```


```{r wdpa_poly_all_table_DT, echo=FALSE, warning=FALSE, message=FALSE}
library(DT)

wdpa_table <- wdpa_poly_all %>%
  select(name, desig, desig_eng, iucn_cat, no_take, status, status_yr, sub_loc) %>% # select only necessary attributes for the table
  st_drop_geometry(.) # to make the table clean

DT::datatable(wdpa_table, 
          class = 'cell-border stripe', # for aesthetics
          colnames = c('Protected Area Name', 'Designation', 'Designation (EN)', 'IUCN Category', 'No Take Zone', 'Status', 'Year Est.', 'Location'), # to rename the columns, removing snakecase
          rownames = FALSE) # remove column numbering 1 - 74
```

